schema: '2.0'
stages:
  prepare:
    cmd: python Code/preprocess_data.py
    deps:
    - path: Code/preprocess_data.py
      md5: fea6be896222bf10a8ba2178bcc50a42
      size: 1759
    - path: data/raw/habibi.csv
      md5: dfff53e4fbf7b837acfaa4eec9926153
      size: 1096892
    params:
      params.yaml:
        prepare.normalize: 1
        prepare.remove_nonarabic: 1
        prepare.remove_punc: 1
        prepare.remove_repeats: 1
        prepare.remove_shadda: 1
        prepare.remove_stopwords: 1
        prepare.remove_tashkeel: 1
        prepare.remove_tatweel: 1
        prepare.stemming: 1
    outs:
    - path: data/processed/habibi.csv
      md5: 231197d6bc68f6fe27724476f7504dff
      size: 668116
  train:
    cmd: python Code/train.py
    deps:
    - path: Code/text_vectorization.py
      md5: 7d25e067c67da8553f841b9c769fcc89
      size: 1545
    - path: Code/train.py
      md5: 5062db2a82197ab04cab98ef6c66bd85
      size: 2930
    - path: data/processed/habibi.csv
      md5: 231197d6bc68f6fe27724476f7504dff
      size: 668116
    params:
      params.yaml:
        train.batch_size: 32
        train.cnn_kernels:
        - 3
        train.cnn_units:
        - 32
        train.dense_units:
        - 32
        - 32
        train.dropout_factor: 0.2
        train.embedding_dim: 100
        train.epochs: 100
        train.hidden_activation: relu
        train.input_length: 200
        train.learning_rate: 0.0003
        train.regularization_factor: 0.001
        train.validation_split: 0.2
        train.vocab_size: 10000
    outs:
    - path: model/lyrics_model.pkl
      md5: ec4d881bedf375b3c492e1430a1fcf84
      size: 1838863
  evaluate:
    cmd: python Code/evaluate.py
    deps:
    - path: Code/evaluate.py
      md5: 8b1b279d4fc5d622bde8308cd24f5020
      size: 5129
    - path: data/eval/eval.json
      md5: b9c2383541a44f6efb7b21e1016d985d
      size: 144998
    - path: model/lyrics_model.pkl
      md5: ec4d881bedf375b3c492e1430a1fcf84
      size: 1838863
    outs:
    - path: metrics/accuracy.json
      md5: 5c1beaee31cdf37dff0c1bf236d4593f
      size: 18
    - path: metrics/f1_score.json
      md5: eea628f5ddc79d2a5e6000478f31d5fb
      size: 32
    - path: metrics/happy_f1_score.json
      md5: 79b2f2f07348a82443191dcb7d749103
      size: 32
    - path: metrics/happy_precision.json
      md5: 4518c1768c1c8d3d1018257d33b4cf6c
      size: 33
    - path: metrics/happy_recall.json
      md5: 8b20a29e27d9391202b8f3faca63afd9
      size: 16
    - path: metrics/precision.json
      md5: 03586800c1910e20514b21e0bb75dda3
      size: 33
    - path: metrics/recall.json
      md5: 6c8e6e7c7a7532a201251863de22718f
      size: 16
    - path: metrics/roc_auc.json
      md5: 46a7c89aca51a689fc76369fd95bd2d1
      size: 37
    - path: metrics/sad_f1_score.json
      md5: e9fd32cb39e80b3dbe7a05c3c5888dae
      size: 32
    - path: metrics/sad_precision.json
      md5: f1c18c1adcf18e2adc755aa7b5a47646
      size: 33
    - path: metrics/sad_recall.json
      md5: a2eb4462d35b08698f0ac8a500e6741a
      size: 16
    - path: plots/classes.csv
      md5: 86be75d3990f3291663d5ad736aa6f66
      size: 1112
