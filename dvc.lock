schema: '2.0'
stages:
  prepare:
    cmd: python Code/preprocess_data.py
    deps:
    - path: Code/preprocess_data.py
      md5: fea6be896222bf10a8ba2178bcc50a42
      size: 1759
    - path: data/raw/habibi.csv
      md5: d65d600f8d986499abde32d447bf2d71
      size: 1035390
    params:
      params.yaml:
        prepare.normalize: 1
        prepare.remove_nonarabic: 1
        prepare.remove_punc: 1
        prepare.remove_repeats: 1
        prepare.remove_shadda: 1
        prepare.remove_stopwords: 1
        prepare.remove_tashkeel: 1
        prepare.remove_tatweel: 1
        prepare.stemming: 0
    outs:
    - path: data/processed/habibi.csv
      md5: 55a4237e6b8bc180da5555c2dc94e99f
      size: 851685
  train:
    cmd: python Code/train.py
    deps:
    - path: Code/text_vectorization.py
      md5: 7d25e067c67da8553f841b9c769fcc89
      size: 1545
    - path: Code/train.py
      md5: 1a94dcc6aa490eae2d38793b4fc29895
      size: 3706
    - path: data/processed/habibi.csv
      md5: 55a4237e6b8bc180da5555c2dc94e99f
      size: 851685
    params:
      params.yaml:
        train.batch_size: 32
        train.cnn_kernels:
        - 3
        train.cnn_units:
        - 32
        train.dense_units:
        - 32
        - 32
        train.dropout_factor: 0.2
        train.embedding_dim: 100
        train.epochs: 100
        train.hidden_activation: relu
        train.input_length: 200
        train.learning_rate: 0.0003
        train.regularization_factor: 0.001
        train.validation_split: 0.2
        train.vocab_size: 10000
    outs:
    - path: model/lyrics_model
      md5: 4632e23d723a837d97a96c4c94ee7c76.dir
      size: 12714302
      nfiles: 4
  evaluate:
    cmd: python Code/evaluate.py
    deps:
    - path: Code/evaluate.py
      md5: 6db043f741fb422ba401b54912636aa6
      size: 4504
    - path: data/eval/eval.json
      md5: b9c2383541a44f6efb7b21e1016d985d
      size: 144998
    - path: model/lyrics_model
      md5: 4632e23d723a837d97a96c4c94ee7c76.dir
      size: 12714302
      nfiles: 4
    outs:
    - path: metrics/f1_score.json
      md5: 17e4b6e012a496add60ec0a7901df2d0
      size: 32
    - path: metrics/happy_f1_score.json
      md5: bc2db36983afe36ba812e167b662e296
      size: 32
    - path: metrics/happy_precision.json
      md5: b361d76239b793e7f084ee806cf17b2c
      size: 33
    - path: metrics/happy_recall.json
      md5: 1f14b6df10362e6cbd87f4eeda7918d8
      size: 16
    - path: metrics/precision.json
      md5: 03fbd7c6164ee01981dadd3cbb3505ad
      size: 32
    - path: metrics/recall.json
      md5: a26d444e516cd0da452450248cb3c276
      size: 18
    - path: metrics/sad_f1_score.json
      md5: fac48799eb6f2ddd9dcb059bdbdca1e1
      size: 32
    - path: metrics/sad_precision.json
      md5: 2bcf4909b3df077c9d63f0bb71e053ca
      size: 33
    - path: metrics/sad_recall.json
      md5: 25250e1bed56eb0f712d80a36a5321b9
      size: 16
    - path: plots/classes.csv
      md5: 97398f9bbe57cb7d945a0b391bb55dff
      size: 1144
